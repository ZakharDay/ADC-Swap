<%

data = {
  cities: [],
  minors: {},
  url: profile_path(@profile)
}

City.all.each do |city|
  id = city.id
  data[:cities].push({id:id, name:city.name})
  data[:minors][id] = []
  city.minors.each do |minor|
    data[:minors][id].push({id:minor.id, name: minor.name})
  end
end

# ExchangeMinor.all.each do |exchange_minor|
#   if exchange_minor.published
#
#     profile = exchange_minor.profile
#     minor = exchange_minor.minor
#     exchande_minors.push({
#       city: 'Москва',
#       year:'2020',
#       title: minor.name,
#       url: exchange_minor_path(minor),
#       address: 'ул. Старая Басманная д. 1/4, стр.2',
#       credits: '24'
#     })
#   end
# end
puts data

%>

<%= javascript_pack_tag 'registration' %>
<div id="reactContainer" data-props="<%=data.as_json.to_json %>"></div>

<%#= render 'registration_form', profile: @profile %>
